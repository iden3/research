When using 3-bit and 4-bit windows, we have {{\bf 1 constraint for the sign}} and {{\bf 3 for the sum}} (as we are using the Montgomery form of the curve, that requires only 3). Now let's look at the constraints required for the multiplexers. \\

With 3-bit windows we need only one constraint per multiplexer, so {\bf 2 constraints} in total. \\

Standard 4-bit windows require two constraints: one for the output and another to compute $s_0*s_1$. So, a priori we would need 4 constraints, two per multiplexer. But we can reduce it to 3 as the computation of $s_0*s_1$ is the same in both multiplexers, so this constraint can be reused. This way only {{\bf 3 constraints}} are required. \\

So, the amount of constraints per bit are:
\begin{itemize}
	\item 3-lookup window : %\fbox{$s_0$}\fbox{$s_1$}\fbox{$s_2$} : 
		$ (1+3+2)/3 = 2 $ constraints per bit.
	\item 4-lookup window : %\fbox{$s_0$}\fbox{$s_1$}\fbox{$s_2$}\fbox{$s_3$} : 
		$ (1 +3+3)/4 = 1.75 $ constraints per bit. 
\end{itemize}

The specific constraints can be determined as follows: let the multiplexers of coordinates $x$ and $y$ be represented by the following look up tables:
\newpage
\begin{table}[h]
    \begin{minipage}{.5\linewidth}
      \centering
	\begin{tabular}{c|c|c|c}
                $s_2$ & $s_1$ & $s_0$ & $out$\\
                	\hline
                	0 & 0 & 0 & $a_0$\\
                	0 & 0 & 1 & $a_1$\\
                	0 & 1 & 0 & $a_2$\\
                	0 & 1 & 1 & $a_3$\\
                	1 & 0 & 0 & $a_4$\\
                	1 & 0 & 1 & $a_5$\\
                	1 & 1 & 0 & $a_6$\\
                	1 & 1 & 1 & $a_7$
      	\end{tabular}
    \end{minipage}%
    \begin{minipage}{.5\linewidth}
      \centering
	\begin{tabular}{c|c|c|c}
		$s_2$ & $s_1$ & $s_0$ & $out$\\
		\hline
		0 & 0 & 0 & $b_0$\\
		0 & 0 & 1 & $b_1$\\
		0 & 1 & 0 & $b_2$\\
		0 & 1 & 1 & $b_3$\\
		1 & 0 & 0 & $b_4$\\
		1 & 0 & 1 & $b_5$\\
		1 & 1 & 0 & $b_6$\\
		1 & 1 & 1 & $b_7$
	\end{tabular}
    \end{minipage} 
\end{table}

\noi We can express them with the following 3 constraints:
% Then, we can express both multiplexers using the following 3 constraints:
\begin{itemize}
    \item 	$aux = s_0 s_1$ %(Reused for both multiplexers)
    \item 	$out = [ (a_7-a_6-a_5+a_4-a_3+a_2+a_1-a_0)*aux 
    		+ (a_6-a_4-a_2+a_0)*s_1$ \\
    		$\text{\qquad\;\;} + (a_5-a_4-a_1+a_0)*s_0
    		+ (a_4 - a_0) ] z 
    		+ (a_3-a_2-a_1+a_0)*aux + (a_2-a_0)*s_1 $\\
    		$\text{\qquad\;\;} + (a_1-a_0)*s_0+ a_0$
    \item	$ out = [ (b_7-b_6-b_5+b_4-b_3+b_2+b_1-b_0)*aux 
    		+ (b_6-b_4-b_2+b_0)*s_1$ \\
    		$\text{\qquad\;\;} + (b_5-b_4-b_1+b_0)*s_0 
    		+ (b_4 - b_0)] z 
    		+ (b_3-b_2-b_1+b_0)*aux + (b_2-b_0)*s_1 \\
    		\text{\qquad\;\:} + (b_1-b_0)*s_0+ b_0$\\
\end{itemize}
